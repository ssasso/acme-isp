frr version 7.5_git
frr defaults datacenter
hostname c1rt
no ipv6 forwarding
service integrated-vtysh-config
!
interface eth1
 description c1rt -> corp1 [external]
 ip address 100.100.2.1/30
!
interface eth2
 description c1rt -> corp2 [external]
 ip address 100.100.2.5/30
!
interface eth3
 description c1rt -> c1host [stub]
 ip address 100.100.15.20/24
!
interface lo
 ip address 100.100.0.20/32
!
router bgp 65535
 bgp router-id 100.100.0.20
 no bgp default ipv4-unicast
 bgp bestpath as-path multipath-relax
 neighbor 100.100.2.2 remote-as 64666
 neighbor 100.100.2.2 description corp1
 neighbor 100.100.2.6 remote-as 64666
 neighbor 100.100.2.6 description corp2
 !
 address-family ipv4 unicast
  network 100.100.0.20/32
  network 100.100.15.0/24
  neighbor 100.100.2.2 activate
  no neighbor 100.100.2.2 send-community extended
  neighbor 100.100.2.2 route-map bp-corp1-1-in in
  neighbor 100.100.2.2 route-map bp-corp1-1-out out
  neighbor 100.100.2.6 activate
  no neighbor 100.100.2.6 send-community extended
  neighbor 100.100.2.6 route-map bp-corp2-2-in in
  neighbor 100.100.2.6 route-map bp-corp2-2-out out
 exit-address-family
!
bgp as-path access-list 1 permit ^$
!
route-map bp-corp1-1-out permit 10
 match as-path 1
 set metric 20
!
route-map bp-corp1-1-out deny 99
!
route-map bp-corp2-2-out permit 10
 match as-path 1
 set metric 100
!
route-map bp-corp2-2-out deny 99
!
route-map bp-corp1-1-in permit 10
 set local-preference 200
!
route-map bp-corp2-2-in permit 10
 set local-preference 100
!
line vty
!
